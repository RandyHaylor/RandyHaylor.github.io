<!DOCTYPE html>
<html>
<head>
  <title>Subject-Specific LLM Prompt Assistant</title>
  <link rel="stylesheet" href="style.css">
  
</head>
<body>

  <div class="outer-container">
    <h1 class="title">Subject-Specific LLM Prompt Assistant</h1>
    <div class="inner-container">
      <div style="font-size: 1.1em; line-height: 1.6; color: #333;">
        <p>
          <span style="font-weight: 600;">The first field is completed for you.<br>Fill out as many other fields on the right as you want.<br>Copy from the output field at the bottom into your chatbot input.</span>
        </p>
        <!--link to info and tips section - remove underline and make link bold not blue-->
        <p><a href="#info" style="text-decoration: none; color: #333; font-weight: 600;">More Info and Tips</a></p>
        
      </div>

  
  
<!--dropdown menu to select form type-->
<!--dropdown label-->
<label for="formType">Select a form type (warning this will reset the form):</label>
<select id="formType">
  <option value="Document Creation">Document Creation</option>
  <option value="Create Technical Instructions">Create Technical Instructions</option>
</select>

    </div>
  </div>

  <div id="form-container">
    <!-- Target form container -->
  </div>

  <div id="output-container">
    <!-- Target output container -->
    <!-- copy button -->
    <div class="button-container">
      <button id="copy-button" class="copy-button">Copy to Clipboard</button>
    </div>
    
    <br>
    <br>
    <!-- output text field max width of div, 10 lines high, expands height for new text without limit-->
    <textarea id="output" style="width: 100%; height: 10em; resize: vertical;" class="expandable-textarea-nolimit"></textarea>
    

  </div>
  <br><br>
  <div class="outer-container">
    <h2>Info and Tips:</h2>
    <div class="inner-container">
      <div style="font-size: 1.1em; line-height: 1.6; color: #333;">
        <p>
          Use this tool to create a task-specific prompt for a LLM. Use the dropdown to switch form types. Fill in details about your request.
          <span style="font-weight: 600;">Copy from the output field at the bottom into your chatbot input.</span>
        </p>
        <ul style="margin-top: 20px;">
          <li>Start by filling out the fields on the right, starting with the second row.</li>
          <li>The output field will be automatically updated as you fill out the form.</li>
          <li>If you want to add additional information, add it to the <span style="font-style: italic;">'Notes to Factor In:'</span> field.</li>
          <li>You may change the fields on the left as well as on the right.</li>
          <li>Empty fields on the right will be omitted (this includes the left field label).</li>
        </ul>
      </div>
    </div>
  </div>

  <script defer>
    //Json schema
const promptComponentSchema = [
{
    "elementType": "div",
    "attributes": {
      "class": "flex-container"
    },
    "children": [
      {
        "elementType": "textarea",
        "attributes": {
          "name": "PromptComponentQuestion",
          "defaultText": "Factor the following into my request: ",
          "placeholder": "Field for instruction on how to implement the text in the neighboring field",
          "rows": "1",
          "class": "left-input expandable-textarea"
        },
        "styles": {}
      },
      {
        "elementType": "textarea",
        "attributes": {
          "name": "PromptComponentAnswer",
          "defaultText": "",
          "placeholder": "Placeholder2",
          "rows": "1",
          "class": "right-input expandable-textarea"
        },
        "styles": {}
      }
    ]
  }
];

const promptCreationFormTemplates = {
  "Document Creation" : [
{
    "PromptComponentQuestion": "As an experienced professional working for me: ",
    "PromptComponentAnswer": {
        "defaultText" : "Act as a writer to create a document",
        "placeholder": "i.e: Act as a writer to create a document, Act as project manager to write a business proposal, ..."
    }
  },
  {
    "PromptComponentQuestion": "Document Type:",
    "PromptComponentAnswer": {"placeholder": "apa, email to boss, announcement tweet, project proposal..."}
  },
  {
    "PromptComponentQuestion": "Document Tone:",
    "PromptComponentAnswer": {"placeholder": "formal, informal, professional, intimate..."}
  },
  {
    "PromptComponentQuestion": "Notes to Factor In:",
    "PromptComponentAnswer": {"placeholder": "any relevant definitions, facts, or other information..."}
  },
  {
    "PromptComponentQuestion": "Original Document/Draft to Start From:",
    "PromptComponentAnswer": {"placeholder": "If you're improving an existing document, paste it here..."}
  },
  {
    "PromptComponentQuestion": "Example text for style and personality:",
    "PromptComponentAnswer": {"placeholder": "Insert a sentence or two that has the style and personality you want to emulate..."}
  },
  {
    "PromptComponentQuestion": "Primary purpose of the document:",
    "PromptComponentAnswer": {"placeholder": "i.e. get a raise, attract new customers, welcome new employees..."}
  },
  {
    "PromptComponentQuestion": "Points to emphasize:",
    "PromptComponentAnswer": {"placeholder": "for example: focus on the recent revenue I've generated, highlight my experience in the industry..."}
  }
],
"Create Technical Instructions" :[
  {
    "PromptComponentQuestion": "As an experienced professional working for me: ",
    "PromptComponentAnswer": {
        "defaultText" : "Act as an engineer to create technical instructions",
        "placeholder": "i.e: Act as a writer to create a document, Act as project manager to write a business proposal, ..."
    }
  },
  {
    "PromptComponentQuestion": "Project Type:",
    "PromptComponentAnswer": {"placeholder": "Carpentry, electrical engineering, software development..."}
  },
  {
    "PromptComponentQuestion": "Level of detail:",
    "PromptComponentAnswer": {"placeholder": "general concepts, lowest level simple steps, etc..."}
  },
  {
    "PromptComponentQuestion": "Notes to Factor In:",
    "PromptComponentAnswer": {"placeholder": "any relevant definitions, facts, or other information..."}
  },
  {
    "PromptComponentQuestion": "Original Document/Draft to Start From:",
    "PromptComponentAnswer": {"placeholder": "If you're improving an existing document, paste it here..."}
  },
  {
    "PromptComponentQuestion": "Example text for style and personality:",
    "PromptComponentAnswer": {"placeholder": "Insert a sentence or two that has the style and personality you want to emulate..."}
  },
  {
    "PromptComponentQuestion": "Primary purpose of the document:",
    "PromptComponentAnswer": {"placeholder": "i.e. build a fence, troubleshoot my computer, automate my todo list notifications..."}
  },
  {
    "PromptComponentQuestion": "Areas to emphasize:",
    "PromptComponentAnswer": {"placeholder": "i.e. what tools to use, what to avoid, what to do if something goes wrong..."}
  },
  {
    "PromptComponentQuestion": "Target details to a reader with the following experience and education:",
    "PromptComponentAnswer": {"placeholder": "i.e. have done small home projects like fixing a door hinge, have a degree in computer science..."}
  }
]

};

//function to make copy button put output text into clipboard
function copyToClipboard() {
  const outputTextArea = document.getElementById("output");
  outputTextArea.select();
  document.execCommand('copy');
}

// Event listener
document.getElementById("copy-button").addEventListener("click", copyToClipboard);

// Function to populate dropdown with available form types
function populateDropdown() {
  const dropdown = document.getElementById("formType");
  const formTypes = Object.keys(promptCreationFormTemplates);

  // Clear existing options
  dropdown.innerHTML = "";

  // Create and append new option elements
  for (const formType of formTypes) {
    const option = document.createElement("option");
    option.value = formType;
    option.text = formType;
    dropdown.appendChild(option);
  }
}

// Call the function to populate the dropdown
populateDropdown();


// Function to delete and recreate the form based on form type
function regenerateForm() {
  const formContainer = document.getElementById("form-container");
  const selectedFormType = document.getElementById("formType").value;
  const selectedTemplate = promptCreationFormTemplates[selectedFormType];

  // Clear existing form
  formContainer.innerHTML = '';

  // Iterate over the template and populate new form
  selectedTemplate.forEach((templateItem) => {
    const newElement = document.createElement(promptComponentSchema[0].elementType);
    newElement.setAttribute("class", promptComponentSchema[0].attributes.class);
    
    // Create children elements (textarea for PromptComponentQuestion and PromptComponentAnswer)
    promptComponentSchema[0].children.forEach((childSchema, index) => {
      const childElement = document.createElement(childSchema.elementType);
      
      for (const [key, value] of Object.entries(childSchema.attributes)) {
        childElement.setAttribute(key, value);
      }
      
      // Set default text or placeholder based on the template
      if (index === 0) { // For PromptComponentQuestion
        childElement.value = templateItem.PromptComponentQuestion;
      } else { // For PromptComponentAnswer
        childElement.placeholder = templateItem.PromptComponentAnswer.placeholder || "";
        childElement.value = templateItem.PromptComponentAnswer.defaultText || "";
      }
      
      newElement.appendChild(childElement);
    });
    
    // Append to the form container
    formContainer.appendChild(newElement);
  });
  updateOutput();
}

let prevSelectedValue = document.getElementById("formType").value; // Initialize with the default selected value

// Attach the regenerateForm function to dropdown change event with confirmation
document.getElementById("formType").addEventListener("change", function() {
  const userConfirmed = window.confirm("This will clear your form, continue?");
  if (userConfirmed) {
    prevSelectedValue = this.value;  // Update to the new value
    regenerateForm();
  } else {
    // Revert the dropdown to its previous value
    this.value = prevSelectedValue;
  }
});


// Initialize the form on page load
regenerateForm();


// Function to update the output field based on the current form state
function updateOutput() {
  const formContainer = document.getElementById("form-container");
  const outputTextArea = document.getElementById("output");
  let outputText = '';

  // Loop through all flex-container divs within the form-container
  Array.from(formContainer.querySelectorAll('.flex-container')).forEach((flexContainer) => {
    const questionTextArea = flexContainer.querySelector('.left-input');
    const answerTextArea = flexContainer.querySelector('.right-input');

    // Include only if the answer field is not empty
    if (answerTextArea.value.trim() !== '') {
      outputText += `${questionTextArea.value}\n${answerTextArea.value}\n\n`;
    }
  });

  // Update the output field
  outputTextArea.value = outputText;

  //trigger the output field resize by sending an input event
  var event = new Event('input', {
    'bubbles': true,
    'cancelable': true
  });
  outputTextArea.dispatchEvent(event);

}

// Attach the updateOutput function to input event of form-container
document.getElementById("form-container").addEventListener('input', updateOutput);

// Call the function once to initialize the output field
updateOutput();



// Get list of all text areas with autoresizing class
var textareas = document.querySelectorAll('.expandable-textarea, .expandable-textarea-nolimit');

// Set a maximum height for 5 lines (this would depend on your specific line-height and padding settings)
var maxHeight = 100; // Replace with the calculated maximum height for 5 lines in pixels

// Add listeners to all text areas
Array.from(textareas).forEach(function(textarea) {
  textarea.addEventListener('input', function autoResize() {
    // Reset height to 'auto' before recalculating scrollHeight
    this.style.height = 'auto';
    
    // Check if textarea has the class 'expandable-textarea-nolimit'
    if (this.classList.contains('expandable-textarea-nolimit')) {
      this.style.height = this.scrollHeight + 'px';
    } else {
      // Set the new height with a limit
      if (this.scrollHeight <= maxHeight) {
        this.style.height = this.scrollHeight + 'px';
      } else {
        this.style.height = maxHeight + 'px';
        this.style.overflowY = 'auto'; // Add scroll if the content exceeds max height
      }
    }
  }, false);
});










</script>







</body>
</html>
